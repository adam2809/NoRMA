<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="norma">

  <material name="blue">
    <color rgba="0 0 0.8 1"/>
  </material>

  <material name="gray">
    <color rgba="0.8 0.8 0.8 1"/>
  </material>

  <xacro:property name="base_mass" value="25" />
  <xacro:property name="base_size_x" value="1.0" />
  <xacro:property name="base_size_y" value="1.2" />
  <xacro:property name="base_size_z" value="1.5" />
  <xacro:property name="base_size" value="${base_size_x} ${base_size_y} ${base_size_z}" />
  <link name="base_link">
    <visual>
      <geometry>
        <box size="${base_size}"/>
      </geometry>
      <material name="blue"/>
    </visual>

    <collision>
      <geometry>
        <box size="${base_size}"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="${base_mass}"/>
      <inertia ixx="${1/12*base_mass*(base_size_z*base_size_z+base_size_y*base_size_y)}" ixy="0.0" ixz="0.0" iyy="${1/12*base_mass*(base_size_x*base_size_x+base_size_z*base_size_z)}" iyz="0.0" izz="${1/12*base_mass*(base_size_x*base_size_x+base_size_y*base_size_y)}"/>
    </inertial>
  </link>
  <link name="dummy"></link>
  <joint name="dummy_joint" type="fixed">
     <parent link="dummy"/>
     <child link="base_link"/>
   </joint>

  <xacro:property name="wheel_radious" value="0.2" />
  <xacro:property name="wheel_length" value="0.1" />
  <xacro:property name="wheel_mass" value="1" />
  <xacro:macro name="wheel" params="wheel_name reflect">
    <link name="${wheel_name}_wheel">
      <visual>
        <geometry>
          <cylinder length="${wheel_length}" radius="${wheel_radious}"/>
        </geometry>
        <origin rpy="0 1.57075 0"/>
        <material name="gray"/>
      </visual>

      <collision>
        <geometry>
          <cylinder length="${wheel_length}" radius="${wheel_radious}"/>
        </geometry>
        <origin rpy="0 1.57075 0"/>
      </collision>

      <inertial>
        <mass value="${wheel_mass}"/>
        <inertia ixx="${1/12*wheel_mass*(3*wheel_radious*wheel_radious+wheel_length*wheel_length)}" ixy="0.0" ixz="0.0" iyy="${1/12*wheel_mass*(3*wheel_radious*wheel_radious+wheel_length*wheel_length)}" iyz="0.0" izz="${1/2*wheel_mass*wheel_radious*wheel_radious}"/>
      </inertial>
    </link>

    <joint name="base_to_${wheel_name}_wheel" type="continuous">
      <parent link="base_link"/>
      <child link="${wheel_name}_wheel"/>
      <origin xyz="${reflect*(base_size_x+wheel_length)/2} 0 ${-base_size_z/2}"/>
      <axis xyz="1 0 0"/>
    </joint>
  </xacro:macro>

  <xacro:wheel wheel_name="left" reflect="-1"/>
  <xacro:wheel wheel_name="right" reflect="1"/>

</robot>

