<launch>
  <!-- Arguments -->
  <arg name="model" default="$(find norma_sim)/urdf/norma.urdf"/>
  <arg name="map_file" default="$(find norma_nav)/maps/lab_map.yaml"/>

  <arg name="base_frame" default="base_link"/>
  <arg name="map_frame"  default="map"/>
  <arg name="odom_frame" default="odom"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_rear_laser_transform" args="0.38 0.3 0 0 0 0 base_link laser" />

  <include file="$(find norma_bringup)/launch/urg_lidar.launch">
    <arg name="serial_port" value="/dev/ttyACM0" />
    <arg name="frame_id" value="laser"/>
  </include> 

  <include file="$(find norma_bringup)/launch/spatial.launch" />
  <include file="$(find norma_nav)/launch/laser_scan_matching.launch" />

  <node pkg="map_server" name="map_server" type="map_server" args="$(arg map_file)"/>

  <include file="$(find norma_nav)/launch/amcl_diff.launch" />
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find norma_nav)/rviz/gmapping.rviz" />
</launch>
